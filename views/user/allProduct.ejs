<%- include('headerlink-layout.ejs') %>
	<%- include('header-layout.ejs') %>

		<!-- Start Banner Area -->
		<section class="banner-area organic-breadcrumb">
			<div class="container">
				<div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
					<div class="col-first">
						<h1>Shop page</h1>
						<nav class="d-flex align-items-center">
							<a href="index.html">Home<span class="lnr lnr-arrow-right"></span></a>
							<a href="#">Shop<span class="lnr lnr-arrow-right"></span></a>
							<a href="category.html">Show all products </a>
						</nav>
					</div>
				</div>
			</div>
		</section>
		<!-- End Banner Area -->
		<div class="container">
			<div class="row">
				<div class="col-xl-3 col-lg-4 col-md-5">
					<div class="sidebar-categories">
						<div class="head">Browse Categories</div>
						<div class="common-filter">

							<% category.forEach(function(pro){ %>
								<li class="main-nav-list btn"><a href="/products/<%= pro.category.id %>"><span
											class=" btn"></span>
										<%= pro.category %><span class="number ">(10+)</span>
									</a>
								</li>
								<% }) %>


						</div>
					</div>
					<div class="sidebar-filter mt-50">

						<div class="common-filter">
							<div class="head">Price</div>
							<div class="price-range-area">
								<div id="price-range"></div>
								<div class="value-wrapper d-flex">
									<div class="price">Price:</div>
									<span>$</span>
									<div id="lower-value"></div>
									<div class="to">to</div>
									<span>$</span>
									<div id="upper-value"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xl-9 col-lg-8 col-md-7">

					<!-- Start Filter Bar -->
					<div class="filter-bar d-flex flex-wrap align-items-center">
						<div class="sorting">
							<select>
								<option value="1">Default sorting</option>
							</select>
						</div>
						<div class="sorting mr-auto">
							<select>
								<option value="1">Show 12</option>

							</select>
						</div>
						<div class="pagination">
							<a href="#" class="prev-arrow"><i class="fa fa-long-arrow-left" aria-hidden="true"></i></a>
							<a href="#" class="active">1</a>
							<a href="#">2</a>
							<a href="#">3</a>

						</div>
					</div>
					<!-- End Filter Bar -->

					<!-- Start Best Seller -->
					<section class="lattest-product-area pb-40 category-list">
						<div class="row">
							<!-- single product -->
							<% products.forEach(function(pro){ %>
								<div class="col-lg-4 col-md-6">
									<div class="single-product">

										<img class="img-fluid" src="/admin/evoimg/<%= pro.image %> "
											alt="no img get users">
										<div class="product-details text-truncate">
											<h6>
												<%= pro.description %>
											</h6>
											<div class="price">
												<h6>$<%= pro.price %>
												</h6>
												<!-- <h6 class="l-through">$210.00</h6> -->
											</div>
											<div class="prd-bottom">
												
												<a class="social-info">
													<span class="btn btn-sm lnr ti-bag"
														onclick="addToCart('<%=pro._id %>','<%=pro.name %>')">
														<p class="hover-text pe-5">add to bag</p>
													</span>
												</a>

												<a class="social-info">
													<span class="btn btn-sm lnr lnr-heart"
														onclick="addToWishlist('<%=pro._id %>','<%=pro.name %>')">
														<p class="hover-text pe-5">Wishlist</p>
													</span>
												</a>


												<a href="/singleProduct/<%= pro._id %> " class="social-info">
													<span class="lnr lnr-move"></span>
													<p class="hover-text">view more</p>
												</a>



											</div>
										</div>
									</div>
								</div>
								<% }) %>
						</div>
					</section>
					<!-- End Best Seller -->
					<!-- Start Filter Bar -->
					<div class="filter-bar d-flex flex-wrap align-items-center">
						<div class="sorting mr-auto">
							<select>
								<option value="1">Show 12</option>
								<option value="1">Show 12</option>
								<option value="1">Show 12</option>
							</select>
						</div>
						<div class="pagination">
							<a href="#" class="prev-arrow"><i class="fa fa-long-arrow-left" aria-hidden="true"></i></a>
							<a href="#" class="active">1</a>
							<a href="#">2</a>
							<a href="#">3</a>
							<a href="#" class="dot-dot"><i class="fa fa-ellipsis-h" aria-hidden="true"></i></a>
							<a href="#">6</a>
							<a href="#" class="next-arrow"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></a>
						</div>
					</div>
					<!-- End Filter Bar -->
				</div>
			</div>
		</div>


		<script>

			function addToWishlist(productId, productName) {

				$.ajax({
					url: '/addToWishList/' + productId,
					method: 'get',
					success: (response) => {
						if (response.status) {
							Swal.fire({


								icon: 'success',
								text: productName,
								title: 'Item added to wishlist',
								showConfirmButton: false,
								timer: 1500
							})
						} else {
							Swal.fire({
								icon: 'error',
								title: 'Oops...',
								text: 'Something went wrong!',
							})
						}
					}

				})
			}



			
			function addToCart (productId,productName) {
		
        $.ajax({
            url: '/addToCart/'+productId,
            method: 'get',
            success: (response)  => {
                if (response.status) {
                    Swal.fire({
                  
                    
                   icon: 'success',
                   text: productName,
                   title: 'Item added to Cart',
                   showConfirmButton: false,
                   timer: 1500
                    })
                } else {
                    Swal.fire({
                  icon: 'error',
                  title: 'Oops...',
                  text: 'Something went wrong!',
                  })
                }
            }
            
        })
     }

		</script>

		<%- include('footer-layout.ejs') %>